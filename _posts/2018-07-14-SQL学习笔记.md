---
layout:     post
title:      MySQL Database
subtitle:   SQL学习笔记（1）
date:       2018-07-14
author:     展飞
header-img: img/sql.jpg
catalog: true
tags:
    - SQL
    - Runtime
--- 
![](http://m.qpic.cn/psb?/V12j1VvP2SOs2p/dOe6ehq9qk6XSWJWpUtwhW3jY2SH2JwzWQzf7TRYubs!/b/dAgBAAAAAAAA&bo=dAQ4BAAAAAARF2w!&rf=viewer_4)


发音：S-Q-L or Sequel

数据分析师为什么要学习SQL？
公司要存储大量的数据，唯一可行的办法是使用某种类型的数据库去存储数据。如果你准备成为一名商业分析师，必须弄清楚如何从数据库中获取想要的数据来做分析。在很多技术驱动（互联网）的企业中，编写SQL语言是从数据库中检索数据的唯一方法，他们是用来提取数据的结构化语句。在传统的企业或大型企业中，有人可以为你提取数据，但是你必须提出一个正式的请求，来帮你查询、整理数据，而这个过程往往耗时几天或者几周。因此公司在聘请数据分析师时，不但希望他们可以分析数据，而且希望他们可以知道如何获取数据。

关系型数据库(Relational Database)
关系型数据库是存储高度组织化和结构化数据集的统一标准，世界上几乎每一家公司都至少有一个关系型数据库。除此之外，一些新型的数据库(Hadoop、NoSQL，None-Relational Databse)被设计用来存储以极快的方式收集的数据，例如GPS数据，生物传感器数据，或者不符合结构化格式的非结构化数据-例如文本数据、微博数据等。虽然这种数据库很有可能在未来流行，但目前数据库市场中绝大多数仍被关系型数据库占据。
![](http://m.qpic.cn/psb?/V12j1VvP2SOs2p/cwjaBot60DZTL9lVyNhW7Wwq5qjfNfTx*K3.S36arsM!/b/dDABAAAAAAAA&bo=4AU4BAAAAAARB.k!&rf=viewer_4)

MySQL数据库(MySQL Database)
市场上的关系型数据库分为很多种，目前比较流行的有IBM公司的DB2、Microsoft公司的SQL Server和Access、Oracle Database、PostgreSQL、SQLite。
![](http://m.qpic.cn/psb?/V12j1VvP2SOs2p/5DQu.8EUipxyB6h.c2ZEksqPQB0.TzMETdkR.9aBFqQ!/b/dEQBAAAAAAAA&bo=KAU4BAAAAAARByE!&rf=viewer_4)
相对于其他关系型数据库，MySQL数据库有开源、成熟、稳定的优点，有比较完整的生态圈，很多企业、社区和个人都在进行SQL相关的使用和研究，有很多工具也被设计用来使用MySQL。MySQL可以胜任存储千万级的用户数据，Facebook、Google、Youtube、GitHub、Linkedin、Twitter、Yahoo都是MySQL数据库的用户。对于不同的关系型数据库，其SQL语法稍有不同。


## 一、准备工作
# 加载sql模块
      $ %load_ext sql

# 连接数据库
      $ %sql mysql://studentuser:studentpw@mysqlserver/dognitiondb

# 设置dognitiondb为默认数据库
      $ %sql USE dognitiondb 

## 二、基本查询
# SQL语句的基本结构
![](http://m.qpic.cn/psb?/V12j1VvP2SOs2p/4H95EA.opPCAN.bWQ5GH3LdrwNwZWOgNgExxj*ol1RQ!/b/dDEBAAAAAAAA&bo=6AT.AgAAAAARFzA!&rf=viewer_4)
# 查询数据库中的表
      $ %sql SHOW tables

# 查询dogs表中含有的列
      $ %sql SHOW columns FROM dogs
        %sql SHOW columns FROM dogs FROM dognitiondb
        %sql SHOW columns FROM dognitiondb.dogs
        %sql DESCRIBE dogs

# 用换行写SQL语句，需要%%sql
      $ %%sql
        SELECT breed
        FROM dogs;

# 为了限制输出行数，使用LIMIT语句
      $ %%sql
        SELECT breed
        FROM dogs LIMIT 5;        ##输出dogs表breed列前5行记录

      $ %%sql
        SELECT breed
        FROM dogs LIMIT 10 OFFSET 5;            ##输出dogs表breed列第6行开始的10条记录

# 在同一个表中查询多列
      $ %%sql
        SELECT breed,breed_type,breed_group
        FROM dogs LIMIT 5,10;

# 查询一个表中的所有列
      $ %%sql
        SELECT *
        FROM reviews LIMIT 5,10;

## 三、用WHERE语句限制查询条件
# 查询某个数值型属性符合一定条件的记录
      $ %%sql
        SELECT user_guid,free_start_user
        FROM users
        WHERE free_start_user=1 LIMIT 10;

        SELECT dog_guid,weight
        FROM dogs
        WHERE weight BETWEEN 10 AND 50;

        SELECT dog_guid,dog_fixed,dna_tested
        FROM dogs
        WHERE dog_fixed=1 OR dna_tested=1;

        SELECT dog_guid,dog_fixed,dna_tested
        FROM dogs
        WHERE dog_fixed=1 AND dna_tested!=1;

## 查询某个字符串属性符合一定条件的记录
      $ %%sql
        SELECT dog_guid,breed
        FROM dogs
        WHERE breed=‘golden retriever’;

        SELECT dog_guid,breed
        FROM dogs
        WHERE breed IN(“golden retriever”,”poodle”);

        SELECT dog_guid,breed
        FROM dogs
        WHERE breed LIKE(“s%”);

## 查询某个日期属性符合一定条件的记录
      $ %%sql
        SELECT dog_guid,created_at
        FROM complete_tests
        WHERE DAYNAME(created_at)=“Tuesday ”

        SELECT dog_guid,created_at
        FROM complete_tests
        WHERE DAY(created_at)>15

        SELECT dog_guid,created_at
        FROM complete_tests
        WHERE created_at>’2014-02-04’

        SELECT dog_guid,test_name,subcategory_name
        FROM complete_tests
        WHERE YEAR(created_at)='2014' AND MONTH(created_at)='10'

## 查询某个属性有空值/没有空值的记录
      $ %%sql
        SELECT user_guid
        FROM users
        WHERE free_start_user IS NOT NULL

        SELECT user_guid
        FROM users
        WHERE free_start_user IS NULL



逻辑语句的执行顺序 1.NOT 2.AND 3.OR
